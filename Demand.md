下面是根据你描述的视频功能 **完全整理后的 Flutter Android APP 需求文档（专业产品规格）**
已经按 **你现在实际的业务逻辑** 完整落地 👇
（你可直接交给 UI、后端/数据工程师 和 Flutter 开发使用）

---

# 📌《线下赛现场检录与评分系统》Flutter 安卓 APP 需求文档

## 一、项目说明

本系统用于现场比赛管理，包含参赛选手检录、作品绑定、评分、数据管理与导出。
最终用于 Android 平板端（Flutter 实现）。

---

## 二、系统主要功能结构

| 模块         | 功能目标                                  | 用户角色   |
| ------------ | ----------------------------------------- | ---------- |
| 首页数据看板 | 入口 + 选手数据总览                       | 所有人     |
| 检录模块     | 扫选手身份码 → 扫作品码 → 绑定 → 更新状态 | 检录管理员 |
| 评分模块     | 扫作品码 → 拍照留存 → 输入分数 → 保存     | 评委       |
| 系统管理     | 查找、修正绑定与分数                      | 超级管理员 |
| 数据导出     | 导出最终 CSV + 图片文件                   | 管理员     |

---

## 三、详细功能模块需求

### 3.1 首页（Dashboard）

- 显示数据表（DataTable）
- 读取 `default data.csv`，实时更新数据
- 左侧展示按钮：

  - [检录]
  - [评分]
  - [系统管理]
  - [导出数据]

> 若 `data.csv` 不存在，显示按钮“导入名单（CSV）”

---

### 3.2 检录模块（Check-in）

#### 权限

- 打开模块需验证管理员身份
- 账号密码本地存储（初版固定值：`admin / 123456`）

#### 检录工作流

流程：
1️⃣ 扫描选手身份码（显示头像、姓名、参赛编号）
2️⃣ 扫描作品码 → 自动绑定当前选手
3️⃣ 更新 CSV 字段：

- work_code
- check_status 设为 1

UI 反馈：

- 信息卡片显示绑定成功
- 当前扫码状态重置

#### 查看检录统计

弹窗：

> 总人数 / 已检录人数 / 未检录人数（列表）

---

### 3.3 评分模块（Scoring）

#### 权限

可选配置是否启用登录验证

#### 评分整体流

**步骤 1：扫码识别作品**

- 识别到 work_code → 查询所属选手
- 显示：姓名、编号、头像（可选）

**步骤 2：拍照留档（必选！）**

- Camera Preview
- 点击拍照
- 保存为暂存图片，例如 temp.jpg
- 图片缩略图显示在当前页面

**步骤 3：输入分数**

- 输入框 + +/- 按钮
- 分数合法性校验（默认 0~100 或自定义范围）

**步骤 4：提交评分**
动作：

- 将 temp.jpg → 重命名为：

  ```
  workCode_score.jpg
  ```

  示例：

  ```
  WK001_95.jpg
  ```

- 文件移动到：

  ```
  /data/evidence/
  ```

- 写入 CSV 字段：

  - score 更新
  - evidence_img 填写图片路径

成功提示：绿色 Toast + 返回扫描页

---

### 3.4 系统管理模块

#### 权限

高级密码验证（例如：super / admin999）

功能：

- 输入姓名或选手码搜索
- 显示完整数据行
- 支持手动修正：

  - work_code
  - score

- 按“保存”按钮同步更新 CSV

⚠ 图像上的文字水印不修改（作为现场真实记录保留）

---

### 3.5 数据导出模块

功能：

- 输入管理员密码
- 生成完整赛果文件：

  - `data.csv`
  - `/data/evidence/*.jpg`

支持导出到：

- Android `/Download/比赛成绩_日期/` 目录
- USB 拷贝或系统共享

格式示例：

```
id,name,member_code,avatar_path,work_code,check_status,score,evidence_img
1,张三,A001,1.jpg,WK001,1,95,/data/evidence/WK001_95.jpg
```

---

## 四、数据结构与文件

### 📍CSV 字段定义（最终统一格式）

| 字段         | 描述                |
| ------------ | ------------------- |
| id           | 自增序号            |
| name         | 姓名                |
| member_code  | 选手身份码          |
| avatar_path  | 头像图片文件名      |
| work_code    | 作品码              |
| check_status | 0 未检录 / 1 已检录 |
| score        | 分数值              |
| evidence_img | 对应评分照片路径    |

---

## 五、技术实现建议（Flutter）

| 功能         | 库                            |
| ------------ | ----------------------------- |
| 条码扫码     | google_mlkit_barcode_scanning |
| 摄像头与拍照 | camera                        |
| 文件管理     | path_provider / file_picker   |
| 权限处理     | permission_handler            |
| 表格查看     | data_table_2                  |

你 APP 中放一个按钮：
打开评分照片文件夹

点击后调用 Android 系统文件选择器
自动跳转到评分照片所在目录
比如：

/storage/emulated/0/ScorePhotos/
